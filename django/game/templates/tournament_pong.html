{% extends 'base.html' %}
{% load static %}
{% block content %}

<div id="gameStatus" style="z-index: 2; color: white;">

	<!-- GAME -->

	<div style="display: block;" id="game-content">
		<div class="wrapper justify-content-center">
			<div class="content-solid rounded mt-4 px-3 py-2 wrapper justify-content-around align-items-center" style="width: 60vw;">
				<div class="wrapper align-items-center">
					<h3>{{ player1.nickname }}</h3>
					<h2 class="fw-bolde mx-3">VS</h2>
					<h3>{{ player2.nickname }}</h3>
				</div>
	
			</div>
		</div>
		<div class="wrapper justify-content-center" style="width: 100%">
			<div class="col-2 p-3 mt-4 justify-content-center text-center">
				<div class="user-image">
					<img src="{{ player1.user.profile_image.url }}" class="rounded-circle user_img">
				</div>
				<h4>{{ player1.nickname }}</h4>
				<h1 class="mt-5" id="player1_score">0</h1>
	
				<button onclick="increaseScore()">Click</button>
			</div>
			<div class="justify-content-center wrapper" style="width: 100%;">
				<div class="col-12 p-3 profile-solid mt-4 mx-3 rounded justify-content-center">
					<div class="game-panel" style="padding-top: 56.25%;">
	
					</div>
					<div class="my-2">
						<div class="progress" style="border: 2px solid #b3b3b3;">
							<div ></div>
							<div id="userScale" class="progress-bar-striped progress-bar-animated progress-bar bg-primary" role="progressbar" style="width: 0%" aria-valuemin="0" aria-valuemax="100"></div>
							<div id="blankScale" class="progress-bar bg-dark" role="progressbar" style="width: 100%" aria-valuemin="0" aria-valuemax="100"></div>
							<div id="opponentScale" class="progress-bar-striped progress-bar-animated progress-bar bg-danger" role="progressbar" style="width: 0%" aria-valuemin="0" aria-valuemax="100"></div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-2 p-3 mt-4 justify-content-center text-center">
				<div class="user-image">
					<img src="{{ player2.user.profile_image.url }}" class="rounded-circle user_img">
				</div>
				<h4>{{ player2.nickname }}</h4>
				<h1 class="mt-5" id="player2_score">0</h1>
			</div>
		</div>
	</div>




</div>
{% endblock %}

{% block body-script %}
<script>

	let tournament_name = "{{ tournament_name }}";
	let match_id = "{{ match_id }}";

	tournamentPongSocket = new WebSocket("wss://" + window.location.host + "/ws/game/tournament/" + tournament_name + "/" + match_id + "/");

    tournamentPongSocket.onopen = function(e) {
        console.log("tournamentPongSocket connection opened");
    };

	tournamentPongSocket.onclose = function(e) {
		console.log("tournamentPongSocket connection closed");
	};
    tournamentPongSocket.onmessage = function(e) {
        let data = JSON.parse(e.data);
        console.log("Message received:", data);
    };
    tournamentPongSocket.onerror = function(e) {
        console.error("tournamentPongSocket error:", e);
    };

</script>

{% endblock %}